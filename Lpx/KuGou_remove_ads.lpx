#!name=酷狗音乐去广告
#!desc=移除开屏广告、应用各类弹窗、各类横幅广告、评论区广告和播放器界面广告。
#!author=可莉🅥[https://github.com/luestr/ProxyResource/blob/main/README.md]
#!tag=去广告
#!system=iOS iPadOS
#!system_version=15
#!loon_version=3.2.9(837)
#!homepage=https://pluginhub.kelee.one
#!icon=https://raw.githubusercontent.com/mist-whisper/Icon/master/App_icon/120px/KuGou.png
#!date=2025-10-14 02:01:00

[Rule]
DOMAIN, ads.service.kugou.com, REJECT
DOMAIN, adstats.tencentmusic.com, REJECT
DOMAIN, adsmind.gdtimg.com, REJECT
DOMAIN, adserviceretry.kugou.com, REJECT
DOMAIN, adserviceretry.kglink.cn, REJECT
DOMAIN, ad.tencentmusic.com, REJECT
DOMAIN, adservice.kugou.com, REJECT
DOMAIN, splashimgretrybssdl.cloud.kugou.com, REJECT

URL-REGEX, "^http:\/\/log\.stat\.kugou\.com\/mobile\/ad\.html", REJECT

[Rewrite]
^https:\/\/fx\.service\.kugou\.com\/mfx-kugoulive\/ad\/ reject-dict
^https:\/\/gateway(retry)?\.kugou\.com\/adp\/ad\/ reject-dict
^https:\/\/gateway(retry)?\.kugou\.com\/ads\.gateway\/ reject-dict

^https:\/\/gateway(retry)?\.kugou\.com\/v\d\/feeds\/follow_feed_fallback reject-dict

^https:\/\/gateway(retry)?\.kugou\.com\/mstc\/musicsymbol\/v\d\/system\/profile reject-dict

^https:\/\/gateway(retry)?\.kugou\.com\/searchnofocus\/v\d\/search_no_focus_word reject-dict

^https:\/\/gateway(retry)?\.kugou\.com\/adp\/bubble\/v\d\/song_play reject-dict

^https:\/\/gateway(retry)?\.kugou\.com\/singerdiscuss\/v\d\/entrance\/comment reject-dict
^https:\/\/gateway(retry)?\.kugou\.com\/r\/v\d\/general\/putin\/midad reject-dict

^https:\/\/gateway(retry)?\.kugou\.com\/ocean\/v\d\/sound\/banner reject-dict

^https:\/\/gzacshow\.kugou\.com\/mfanxing-home\/cdn\/room\/index\/list_v2 reject-dict

^https:\/\/gzacshow\.kugou\.com\/mfx-rt-show\/cdn\/mo\/show\/headline reject-dict

^https:\/\/m1fxgroup\.kugou\.com\/fxsing\/yqc\/alongInfo\/getUserAlongInfo reject-dict

^https:\/\/hwstore\.kugou\.com\/v\d\/get_store_data reject-dict
^https:\/\/ep\.kugou\.com\/v\d\/album_shop\/get_entrance_info reject-dict

^https:\/\/gateway(retry)?\.kugou\.com\/ocean\/v\d\/tab\/list_v\d response-body-json-jq 'def namesToRemove:["AI帮唱","长相思2","K歌","小说","游戏"];def removeParentIfNameMatches:if type=="object"then with_entries(select(.value|(type=="object"and .name as $name|$name|IN(namesToRemove[])|not)))|map_values(removeParentIfNameMatches)else .end;removeParentIfNameMatches'

# 开屏广告
^https?:\/\/ads\.service\.kugou\.com\/v4\/mobile_splash.*$ response-body-json-jq '.data.boot_ads = [] | .data.front_ads = []'
^https?:\/\/ads\.service\.kugou\.com\/v4\/mobile_splash_sort(\?.*)?$ response-body-json-jq '.data.ads = [] | .data.retry_local_ads = [] | .data.retry_ads = [] | .data.least_ads = []'

# 用户配置推广
^https?:\/\/gateway\.kugou\.com\/(?:\w+\/)*combo\/startup response-body-json-jq 'del(.data.responses[] | select(.module == "overseas_check_v2" or .module == "tab_bottom_list"))'

# ip位置修改
^https:\/\/gateway\.kugou\.com\/[\w\/.-]+(?=\?appid=) response-body-json-jq '.data.info.province = "上海市" | .data.info.city = "上海" | .data.info.adcode = "310000"'

# 搜索框推广
^https?:\/\/gateway\.kugou\.com\/searchnofocus\/v1\/search_no_focus_word(\?.*)?$ response-body-json-jq '.data.ads = [] | .data.fallback = []'
# 热搜 等待后续更新
# ^https?:\/\/gateway\.kugou\.com\/hotsearch\/v1\/search_hotword(\?.*)?$ response-body-json-jq '.data.list = [] | .data.extension = []'
# 猜你喜欢
^https?:\/\/gateway\.kugou\.com\/guessyousearch\/v1\/guess_you_search(\?.*)?$ response-body-json-jq '.data.words = []'

# 应用内推广
^https?://gateway\.kugou\.com/mstc/musicsymbol/v1/system/profile response-body-json-jq '.data.task = [] | .data.ads = []'

# 首页净化
^https:\/\/gateway\.kugou\.com\/card\/v1\/pxy\/recommend_stream_v2\?.*$ response-body-json-jq 'del(.data.responses[] | select((.module | startswith("song_module")) or .module == "realtime_songlist" or .module == "follow_newsong_album" or .module == "longaudio_picked_show" or .module == "video_tab" or .module == "store_recommend" or .module == "perfection_album" or .module == "ai_songlist" or .module == "kroom_kuqun" or .module == "ys_recommend_sing" or .module == "ad_fx_recommend" or .module == "longaudio_category" or .module == "fx_recommend_star"))'

[MitM]
hostname=gateway.kugou.com, fx.service.kugou.com, hwstore.kugou.com, ep.kugou.com, gatewayretry.kugou.com, gzacshow.kugou.com, m1fxgroup.kugou.com, ads.service.kugou.com
